file(GLOB_RECURSE LIBENGINE_SOURCES CONFIGURE_DEPENDS *.cpp)

add_library(engine STATIC ${LIBENGINE_SOURCES})
target_compile_definitions(engine PRIVATE
	$<$<BOOL:${ENABLE_AUDIOCD}>:WITH_AUDIOCD>
	$<$<BOOL:${ENABLE_IMAGE}>:WITH_IMAGE>
	$<$<BOOL:${ENABLE_IMAGE}>:WITH_ZLIB>
	$<$<BOOL:${ENABLE_MIXER}>:WITH_MIXER>
	$<$<BOOL:${ENABLE_UNICODE}>:WITH_TTF>
	$<$<BOOL:${ENABLE_UNICODE}>:WITH_ICONV>
	$<$<BOOL:${ENABLE_ZLIB}>:WITH_ZLIB>
	)
target_include_directories(engine PUBLIC
	${${USE_SDL_VERSION}_INCLUDE_DIR}
	$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
	$<INSTALL_INTERFACE:include>
	)
target_link_libraries(engine
	smacker
	${${USE_SDL_VERSION}MAIN_LIBRARY}
	${${USE_SDL_VERSION}_LIBRARY}
	$<$<BOOL:${ENABLE_IMAGE}>:${${USE_SDL_VERSION}_IMAGE_LIBRARIES}>
	$<$<BOOL:${ENABLE_IMAGE}>:PNG::PNG>
	$<$<BOOL:${ENABLE_IMAGE}>:ZLIB::ZLIB>
	$<$<BOOL:${ENABLE_MIXER}>:${${USE_SDL_VERSION}_MIXER_LIBRARIES}>
	$<$<BOOL:${ENABLE_UNICODE}>:Iconv::Iconv>
	$<$<BOOL:${ENABLE_UNICODE}>:${${USE_SDL_VERSION}_TTF_LIBRARIES}>
	)
export(TARGETS engine FILE EngineConfig.cmake)
